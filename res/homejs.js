function setHomeWH(){var e=document.getElementById("homecon"),n=document.getElementById("skillcon"),i=document.getElementById("expcon"),t=document.getElementById("contactcon");e.style.width="100%",e.style.height=window.innerHeight+"px",e.style.backgroundColor="#222",n.style.width="100%",n.style.height=window.innerHeight+"px",n.style.backgroundColor="#eee",i.style.width="100%",i.style.height=window.innerHeight+"px",i.style.backgroundImage="url(res/img/CUBEx3.jpg)",t.style.width="100%",t.style.height=window.innerHeight+"px",t.style.backgroundColor="#222";var o=e.getBoundingClientRect().top+document.body.scrollTop,l=n.getBoundingClientRect().top+document.body.scrollTop,a=i.getBoundingClientRect().top+document.body.scrollTop,d=t.getBoundingClientRect().top+document.body.scrollTop;conY=[o,l,a,d]}function fullPage(){setHomeWH();var e=document.getElementById("navul"),n=0;if(setNowCon(n),window.scrollTo(0,0),"#contact"===window.location.hash){n=3;var i=conY[n];scrollToAnimate(i,function(){setNowCon(n)})}var t=0;navigator.userAgent.toLowerCase().indexOf("mobile")===-1?(e.onclick=function(e){n=Number(e.target.id.substring(3));var i=conY[n];startScroll(n),scrollToAnimate(i,function(){setNowCon(n)})},window.onscroll=function(e){var i=document.documentElement.scrollTop+document.body.scrollTop;i>t&&!isscrolling?n<3&&(n++,startScroll(n),scrollToAnimate(conY[n],function(){setNowCon(n)})):t>i&&!isscrolling&&n>0&&(n--,startScroll(n),scrollToAnimate(conY[n],function(){setNowCon(n)})),t=i}):e.onclick=function(e){n=Number(e.target.id.substring(3));var i=conY[n];scrollToAnimate(i,function(){setNowCon(n)})}}function startScroll(e){if(isInitSkillTree&&1!==e&&skillTreeReturn(window.skilltreectcanvas,window.groupnode,window.groupnode2,window.groupline,window.groupline2),isInitSkillTree&&1===e&&skillTreeBoom(window.skilltreectcanvas,window.skillhead),1===e&&!isInitSkillTree){var n=document.getElementById("skillcircle"),i=setInterval(function(){n.style.opacity<1?n.style.opacity=Number(n.style.opacity)+.1:clearInterval(i)},100);window.skilltreectcanvas=skilltree()}2!==e||window.timelinectcanvas||(window.timelinectcanvas=timelineInit()),2!==e&&window.timelinectcanvas&&timelineReturn(window.timelinectcanvas)}function scrollToAnimate(e,n){function i(){t+=o,l--,window.scrollTo(0,t),l>0?setTimeout(i,20):setTimeout(function(){n&&n(),isscrolling=!1},30)}if(!isscrolling){isscrolling=!0;var t=document.documentElement.scrollTop+document.body.scrollTop,o=(e-t)/30;t+=5*o,window.scrollTo(0,t);var l=25;i()}}function setNowCon(e){document.getElementById("nav0").className="",document.getElementById("nav1").className="",document.getElementById("nav2").className="",document.getElementById("nav3").className="";document.getElementById("nav"+e).className="navNow"}function showSkillTree(){function e(e,n,i){var t=new ctLine(e.fillStyle,n||300,i||300,e.x+30,e.y+30,2,1);B.push(t)}function n(e,n,i){var t=new ctLine(e.fillStyle,n||300,i||300,e.x+30,e.y+30,2,1);P.push(t)}function i(){window.groupnode=I,window.groupnode2=W,window.groupline=B,window.groupline2=P;for(var e=0;e<I.length;e++)t(I[e]);for(var n=0;n<W.length;n++)t(W[n]);isInitSkillTree=!0}function t(e){e.on("click",function(){var n=new Image;n.src="res/img/"+e.nodetext.toLowerCase()+".png",n.onload=function(){window.skillhead.img=n,o.drawCanvas()}})}var o=new ctCanvas("skilltree");o.addTrigger("click");var l,a=new ctFillCircle("#333",300,300,75,.1),d=new ctFillCircle("#444",300,300,160,.1),r=new ctFillCircle("#444",300,300,250,.1),s=new skillArc("#f0db4f",(-55),35,75),c=new skillArc("#d94c28",35,45,75),w=new skillArc("#ffb415",45,75,75),m=new skillArc("#574498",75,195,75),g=new skillArc("#2e2a69",195,225,75),u=new skillArc("#046aae",225,255,75),f=new skillArc("#3ad591",255,305,75),k=new Image;k.src="res/img/skillhead.png",k.onload=function(){l=new ctDrawImg(k,225,225),o.addObj(l),window.skillhead=l;var e=[a,d,r,s,c,w,m,g,u,f,l];o.addObjs(e),window.skillhead.on("click",function(){var e=new Image;e.src="res/img/skillhead.png",e.onload=function(){window.skillhead.img=e,o.drawCanvas()}})};var v=new skillNode("JS","#f0db4f",395,248,1),y=new skillNode("HTML","#d94c28",428,404,1),h=new skillNode("CSS","#ffb415",325,370,1),p=new skillNode("Java","#574498",110,270,1),b=new skillNode("python","#574498",158,380,1),T=new skillNode("nodejs","#574498",270,430,1),x=new skillNode("SQL","#2e2a69",96,170,1),N=new skillNode("git","#046aae",208,162,1),C=new skillNode("PS","#3ad591",310,72,1),I=[v,y,h,p,b,T,x,N,C],B=[];e(v),e(C),e(N),e(h),e(y),e(b),e(p,195,300),e(x),e(T,300,405);var S=new ctStrokeArc("#574498",2,300,300,105,90,180,1);B.push(S),o.addObjs(B),o.addObjs(I);var j=new skillNode("Threejs","#f0db4f",440,140,1),O=new skillNode("TypeScript","#f0db4f",484,232,1),E=new skillNode("egret","#f0db4f",580,215,1),A=new skillNode("jQuery","#f0db4f",477,331,1),L=new skillNode("LESS","#ffb415",360,468,1),H=new skillNode("django","#574498",154,480,1),Z=new skillNode("flask","#574498",58,380,1),M=new skillNode("MySQL","#2e2a69",96,74,1),W=[j,O,E,A,L,H,Z,M],P=[];n(M,x.x+30,x.y+30),n(H,b.x+30,b.y+30),n(Z,b.x+30,b.y+30),n(L,h.x+30,h.y+30),n(O,v.x+30,v.y+30),n(E,O.x+30,O.y+30),n(j,v.x+30,v.y+30),n(A,v.x+30,v.y+30),o.addObjs(P),o.addObjs(W),o.drawCanvas(),i()}function skillO(e){var n=new ctFillCircle("#333",300,300,75,.1),i=new ctFillCircle("#444",300,300,160,.1),t=new ctFillCircle("#444",300,300,250,.1),o=new skillArc("#f0db4f",(-55),35,75),l=new skillArc("#d94c28",35,45,75),a=new skillArc("#ffb415",45,75,75),d=new skillArc("#574498",75,195,75),r=new skillArc("#2e2a69",195,225,75),s=new skillArc("#046aae",225,255,75),c=new skillArc("#3ad591",255,305,75),w=window.skillhead,m=[n,i,t,o,l,a,d,r,s,c,w];e.reset(),e.addTrigger("click"),e.addTrigger("mousemove"),e.addObjs(m),e.drawCanvas()}function skilltree(){function e(){n(v,function(){n(w,function(){n(m,function(){n(g,function(){i()})})})}),n(u,function(){n(f,function(){n(k)})})}function n(e,n){var i=e.sangle,t=e.eangle;e.eangle=i+5*Math.PI/180,o.addObj(e);var l=animation(function(){e.eangle<t?e.eangle+=5*Math.PI/180:(clearInterval(l),n&&n())},o)}function i(){u.r-=5,m.r+=10,k.r+=5,v.r-=10;var e=animation(function(){u.r<75&&u.r++,k.r>75&&k.r--,v.r<75&&v.r++,m.r>75?m.r--:(clearInterval(e),t())},o)}function t(){var e=new Image;e.src="res/img/skillhead.png",e.onload=function(){s=new ctDrawImg(e,225,225),o.addObj(s),window.skillhead=s,skillTreeBoom(o,s)}}var o=new ctCanvas("skilltree");o.addTrigger("click"),o.addTrigger("mousemove");var l=new ctFillCircle("#333",300,300,5,.3),a=new ctFillCircle("#444",300,300,5,.1),d=new ctFillCircle("#444",300,300,5,.1),r=[d,a,l];o.addObjs(r);var s,c=animation(function(){l.r<75&&(l.r+=5,l.x-=5,l.y-=5),a.r<160&&(a.r+=5,a.x-=5,a.y-=5),d.r<250?(d.r+=5,d.x-=5,d.y-=5):(clearInterval(c),e())},o),w=new skillArc("#f0db4f",(-55),35,75),m=new skillArc("#d94c28",35,45,85),g=new skillArc("#ffb415",45,75,75),u=new skillArc("#574498",75,195,70),f=new skillArc("#2e2a69",195,225,75),k=new skillArc("#046aae",225,255,80),v=new skillArc("#3ad591",255,305,70);return o}function skillTreeBoom(e,n){function i(){l(s),l(v),l(k),l(w),l(c),l(g),l(m,195,300),l(f),l(u,300,405);var i=new ctStrokeArc("#574498",2,300,300,105,90,180,.01);h.push(i),e.addObjs(h),e.addObjs(y),e.removeObj(n),e.addObj(n);for(var a=0;a<y.length;a++)t(y[a]);setTimeout(function(){for(var e=0;e<h.length;e++)h[e].to({alpha:1},300);setTimeout(o(),500)},600)}function t(e,n,i){var t=e.x,o=e.y;e.x=n||270,e.y=i||270,e.alpha=1,e.to({x:t,y:o},500)}function o(){a(B,f.x+30,f.y+30),a(C,g.x+30,g.y+30),a(I,g.x+30,g.y+30),a(N,w.x+30,w.y+30),a(b,s.x+30,s.y+30),a(T,b.x+30,b.y+30),a(p,s.x+30,s.y+30),a(x,s.x+30,s.y+30),e.addObjs(j),e.removeObjs(y),e.addObjs(y),e.addObjs(S),t(B,f.x,f.y),t(C,g.x,g.y),t(I,g.x,g.y),t(N,w.x,w.y),t(p,s.x,s.y),t(b,s.x,s.y),t(x,s.x,s.y),t(T,s.x,s.y),setTimeout(function(){for(var e=0;e<j.length;e++)j[e].to({alpha:1},300);setTimeout(d(),500)},600)}function l(e,n,i){var t=new ctLine(e.fillStyle,n||300,i||300,e.x+30,e.y+30,2,.01);h.push(t)}function a(e,n,i){var t=new ctLine(e.fillStyle,n||300,i||300,e.x+30,e.y+30,2,.01);j.push(t)}function d(){window.groupnode=y,window.groupnode2=S,window.groupline=h,window.groupline2=j;for(var e=0;e<y.length;e++)r(y[e]);for(var n=0;n<S.length;n++)r(S[n]);isInitSkillTree=!0,window.skillhead.on("click",function(){isBoomed?skillTreeReturn(window.skilltreectcanvas,window.groupnode,window.groupnode2,window.groupline,window.groupline2):skillTreeBoom(window.skilltreectcanvas,window.skillhead)})}function r(n){n.on("click",function(){n.r=30;var i=new Image;i.src="res/img/"+n.nodetext.toLowerCase()+".png",i.onload=function(){window.skillhead.img=i,e.drawCanvas()},setTimeout(function(){n.r=25,e.drawCanvas()},200)}),n.on("mousemove",function(){25===n.r&&(n.r=30,e.drawCanvas(),setTimeout(function(){n.r=25,e.drawCanvas()},500))})}if(!isBoomed){isBoomed=!0,skillO(e);var s=new skillNode("JS","#f0db4f",395,248,.01),c=new skillNode("HTML","#d94c28",428,404,.01),w=new skillNode("CSS","#ffb415",325,370,.01),m=new skillNode("Java","#574498",110,270,.01),g=new skillNode("python","#574498",158,380,.01),u=new skillNode("nodejs","#574498",270,430,.01),f=new skillNode("SQL","#2e2a69",96,170,.01),k=new skillNode("git","#046aae",208,162,.01),v=new skillNode("PS","#3ad591",310,72,.01),y=[s,c,w,m,g,u,f,k,v],h=[];i();var p=new skillNode("Threejs","#f0db4f",440,140,.01),b=new skillNode("TypeScript","#f0db4f",484,232,.01),T=new skillNode("egret","#f0db4f",580,215,.01),x=new skillNode("jQuery","#f0db4f",477,331,.01),N=new skillNode("LESS","#ffb415",360,468,.01),C=new skillNode("django","#574498",154,480,.01),I=new skillNode("flask","#574498",58,380,.01),B=new skillNode("MySQL","#2e2a69",96,74,.01),S=[p,b,T,x,N,C,I,B],j=[]}}function skillTreeReturn(e,n,i,t,o){if(isBoomed){var l=new Image;l.src="res/img/skillhead.png",l.onload=function(){window.skillhead.img=l,e.removeObj(window.skillhead),e.addObj(window.skillhead),e.drawCanvas()},e.removeObjs(t),e.removeObjs(o);for(var a=0;a<n.length;a++)n[a].to({x:270,y:270},500);for(var d=0;d<i.length;d++)i[d].to({x:270,y:270},500);setTimeout(function(){e.removeObjs(n),e.removeObjs(i),isBoomed=!1,window.skillhead.on("click",function(){isBoomed?skillTreeReturn(window.skilltreectcanvas,window.groupnode,window.groupnode2,window.groupline,window.groupline2):skillTreeBoom(window.skilltreectcanvas,window.skillhead)})},600)}}function timelineInit(){function e(e){e.on("mousedown",function(){e.textalpha=1,e.r>=3&&(e.r-=3),o.drawCanvas()}),e.on("mouseup",function(){e.textalpha=.1,e.r<16&&(e.r+=3),o.drawCanvas()}),e.on("click",function(){clickTimeNode(e.timetitle)})}function n(e){if(window.innerWidth>850)var n=e.y,i=e.x;else var n=e.x,i=e.y;e.x=10,e.y=10,e.alpha=1,e.to({x:n,y:i},1e3)}var i=document.getElementById("timeline"),t=!1;window.innerWidth>=850&&(i.width=800,i.height=100,t=!0);var o=new ctCanvas("timeline");o.addTrigger("click"),o.addTrigger("mousedown"),o.addTrigger("mouseup"),o.addTrigger("mousemove");var l=new timeNode(t,"SCUT","#f2a152",30,30,16),a=new timeNode(t,"BBT","#36ac4b",30,72,13),d=new timeNode(t,"graduate","#35ad98",30,196,7),r=new timeNode(t,"对白","#fff",30,249,9),s=new timeNode(t,"DKZ HOME","#222",30,371,10),c=new timeNode(t,"artist ZengXin","#b28850",30,405,5),w=new timeNode(t,"CUBEx3","#48afd8",30,472,14),m=new timeNode(t,"Paypal payment","#042e78",30,513,11),g=new timeNode(t,"meiriq Game","#fc631c",30,581,12),u=new timeNode(t,"egretInit","#0f0",30,611,6),f=new timeNode(t,"canvasTrigger","#f00",30,641,8),k=new ctLine("#000",30,30,30,30,4);o.addObj(k);var v=[l,a,d,r,s,c,w,m,g,u,f];o.addObjs(v);for(var y=animation(function(){k.ey<641&&window.innerWidth<850?k.ey+=10:k.ex<641&&window.innerWidth>=850?k.ex+=10:clearInterval(y)},o),h=0;h<v.length;h++)n(v[h]),e(v[h]);return o}function timelineReturn(e){e.reset(),window.timelinectcanvas=null}function clickTimeNode(e){for(var n,i=0;i<timedata.length;i++)timedata[i].id===encodeURI(e).replace(/%/g,"_")&&(n=timedata[i].data);renderExpCon(n,encodeURI(e).replace(/%/g,"_"))}function renderExpCon(e,n){var i=document.getElementById("exptext"),t=1,o=!1,l=setInterval(function(){if(t>.1&&!o)t-=.05,expcon.style.opacity=t;else{o=!0,expcon.style.backgroundImage="none",expcon.style.backgroundImage="url(res/img/"+n+".jpg)";for(var a="<ul>",d=0;d<e.list.length;d++)a="http"===e.list[d].substring(0,4)?a+'<li><a href="'+e.list[d]+'">'+e.list[d]+"</a></li>":a+"<li>"+e.list[d]+"</li>";var a=a+"</ul><h2>"+e.title+"</h2><p>"+e.date+"</p><h3>"+e.info+"</h3>";i.innerHTML=a,o&&t<1?(t+=.05,expcon.style.opacity=t):(o=!1,t=1,clearInterval(l))}},30)}function rotateCube(){var e=document.getElementById("contactcon"),n=document.getElementById("cube");e.onmousemove=function(e){var i=180*Math.atan((e.clientY-window.innerHeight/2)/(e.clientX-window.innerWidth/2))/Math.PI;e.clientY-window.innerHeight/2>0&&e.clientX-window.innerWidth/2<0?(n.style.transform="rotateZ("+i/2+"deg)",n.style.webkitTransform="rotateZ("+i/2+"deg)"):e.clientY-window.innerHeight/2>0&&e.clientX-window.innerWidth/2>0?(n.style.transform="rotateZ("+(i/2-90)+"deg)",n.style.webkitTransform="rotateZ("+(i/2-90)+"deg)"):e.clientY-window.innerHeight/2<0&&e.clientX-window.innerWidth/2>0?(n.style.transform="rotateZ("+(i/2-180)+"deg)",n.style.webkitTransform="rotateZ("+(i/2-180)+"deg)"):e.clientY-window.innerHeight/2<0&&e.clientX-window.innerWidth/2<0&&(n.style.transform="rotateZ("+(i/2+90)+"deg)",n.style.webkitTransform="rotateZ("+(i/2+90)+"deg)")}}function showTimeLine(){function e(e){e.textalpha=0,e.on("click",function(){clickTimeNode(e.timetitle)})}function n(e){if(window.innerWidth>850)var n=e.y,i=e.x;else var n=e.x,i=e.y;e.x=n,e.y=i,e.alpha=1}var i=document.getElementById("timeline"),t=!1;window.innerWidth>=850&&(i.width=800,i.height=100,t=!0);var o=new ctCanvas("timeline");o.addTrigger("click");var l=new timeNode(t,"SCUT","#f2a152",30,30,16),a=new timeNode(t,"BBT","#36ac4b",30,72,13),d=new timeNode(t,"graduate","#35ad98",30,196,7),r=new timeNode(t,"对白","#fff",30,249,9),s=new timeNode(t,"DKZ HOME","#222",30,371,10),c=new timeNode(t,"artist ZengXin","#b28850",30,405,5),w=new timeNode(t,"CUBEx3","#48afd8",30,472,14),m=new timeNode(t,"Paypal payment","#042e78",30,513,11),g=new timeNode(t,"meiriq Game","#fc631c",30,581,12),u=new timeNode(t,"egretInit","#0f0",30,611,6),f=new timeNode(t,"canvasTrigger","#f00",30,641,8),k=new ctLine("#000",30,30,30,30,4);o.addObj(k);var v=[l,a,d,r,s,c,w,m,g,u,f];o.addObjs(v),window.innerWidth<850?k.ey=641:window.innerWidth>=850&&(k.ex=641);for(var y=0;y<v.length;y++)n(v[y]),e(v[y]);o.drawCanvas()}window.onload=function(){fullPage();var e=document.getElementById("dkzlogo"),n=e.getContext("2d"),i=new DKZLogoClass(n,30);i.drawDKZ("stroke"),setTimeout(i.animateDKZ(),2e3),e.onclick=function(e){i.fillrandomDKZ()},navigator.userAgent.toLowerCase().indexOf("mobile")===-1?rotateCube():(showSkillTree(),showTimeLine())};var conY,isInitSkillTree=!1,isscrolling=!1,isBoomed=!1,timedata=[{id:"SCUT",data:{title:"华南理工大学",info:"经济与贸易学院 电子商务 管理学学士",date:"2011.9-2015.7",list:["2013年华南理工大学经济与贸易学院优秀共青团干部","2014年华南理工大学优秀学生干部"]}},{id:"BBT",data:{title:"百步梯",info:"百步梯学生创新中心 美工部 部长",date:"2011.9-2014.4",list:["百步梯组织形象 VI设计 海报设计","第八届雕刻时光电影节光迹涂鸦活动海报","2013年爱上女主播播音主持大赛舞台布置"]}},{id:"graduate",data:{title:"毕业季",info:"百步梯毕业季活动官方网站设计",date:"2013.4",list:["http://bbtgraduate.sinaapp.com","整页滚动网站 开始接触前端","jQuery html css"]}},{id:"_E5_AF_B9_E7_99_BD",data:{title:"对白",info:"台词查询网站",date:"2012.6-2014.2",list:["http://dialogue.sinaapp.com","台词分享查询网站 使用爬虫收集字幕文件并解析添加到数据库","2016/1增加微信接口可在公众号 造物 中使用","python django flask mysql sae sqlite"]}},{id:"DKZ_20HOME",data:{title:"DKZ's HOME",info:"我的个人主页",date:"2014.6-2014.7 update 2015.8-",list:["http://davidkingzyb.github.io","我的个人主页 了解我更多 Hello World!","DKZ's BLOG 分享技术 基于markdown实现","python JavaSctipt TypeScript canvas markdown"]}},{id:"artist_20ZengXin",data:{title:"油画家曾新",info:"父亲的油画展示页面",date:"2014.7-2014.8",list:["http://zengxin.sinaapp.com","给爸爸做的首页 展示爸爸的作品","个性化定制可复用的UI组件","django jquery svg sae"]}},{id:"CUBEx3",data:{title:"CUBEx3",info:"独立游戏",date:"2014.11-",list:["http://cubex3.sinaapp.com","独立完成游戏的构思 角色设计","功能设计 交互设计 UI及美工制作","前端及后台的代码实现","2015白鹭杯HTML5游戏开发者大赛最佳创意奖提名和最具潜力奖","python django MySQL jquery CSS-transform"]}},{id:"Paypal_20payment",data:{title:"PayPal Pay",info:"基于PayPal实现的支付系统",date:"2014.12-2015.5",list:["http://cubex3.sinaapp.com/paypal","支付流程设计 制定解决方案 代码实现","将其应用于游戏CubeX3的虚拟道具支付功能","python paypal-python-SDK"]}},{id:"meiriq_20Game",data:{title:"meiriq Game",info:"每日Q游戏 前端开发工程师",date:"2015.4-12",list:["http://davidkingzyb.github.io/blogmd/10.html","使用egret引擎开发HTML5小游戏","艾斯特的记忆 魔法师学徒 找出卧底","双色消除物语 等多款游戏主程"]}},{id:"egretInit",data:{title:"egretInit",info:"快速构建egret项目",date:"2015.6-11",list:["https://github.com/davidkingzyb/egretInit","封装常用的egret方法与类","优化工作流 快速定义资源","基于时间使用observe模式的帧动画管理类","常用的可复用组件","debug工具 实现可视化编辑"]}},{id:"canvasTrigger",data:{title:"canvasTrigger",info:"canvas工具库",date:"2015.8-10",list:["https://github.com/davidkingzyb/canvasTrigger","用于构建canvas图表与组件","在canvas中定义对象","向这些对象派发浏览器事件","实现基于时间的帧动画和缓动动画"]}}];